<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Optiloves Invest â€“ Home</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div class="container" style="display:flex;justify-content:space-between;align-items:center;">
        <div class="logo">
          <img src="assets/logo_horizontal.svg" alt="Optiloves Invest" height="32" />
        </div>
        <nav><a href="dashboard.html">Dashboard</a></nav>
      </div>
    </header>

    <main class="container" style="padding: 1rem 1.25rem;">
      <h1>Featured Properties</h1>
      <div id="grid" class="property-grid"></div>
    </main>

  
    <script>
      const grid = document.getElementById("grid");

      function makeCard(p) {
        const a = document.createElement("a");
        a.href = `property.html?slug=${encodeURIComponent(p.slug)}`;
        a.className = "property-card";
        a.style.textDecoration = "none";
        a.innerHTML = `
          <div style="overflow:hidden;border-radius:12px;">
            <img src="${p.image}" alt="${p.name}" style="width:100%;height:auto;display:block;" />
          </div>
          <div style="padding:0.75rem;">
            <h3 style="margin:0 0 0.25rem 0;">${p.name}</h3>
            <div class="muted" style="margin-bottom:0.5rem;">${p.city}</div>
            <div class="muted">Price per token: <strong>$${p.pricePerToken}</strong></div>
            <div class="muted">Available: <strong>${p.availableTokens}</strong></div>
            <div style="margin-top:0.6rem;"><span class="btn">View & Invest</span></div>
          </div>
        `;
        return a;
      }

      grid.innerHTML = "";
      (window.properties || []).forEach(p => grid.appendChild(makeCard(p)));
    </script>
<script src="config.js"></script>
<script>
fetch(`${BACKEND_URL}/api/properties`)
  .then(res => res.json())
  .then(properties => {
    const grid = document.getElementById("grid");
    grid.innerHTML = "";
    properties.forEach(p => {
      grid.innerHTML += `
        <a href="property.html?slug=${p.slug}" class="property-card">
          <img src="${p.image}" alt="${p.name}" />
          <h3>${p.name}</h3>
          <p>${p.city}</p>
          <p>Price per token: $${p.pricePerToken}</p>
          <p>Available: ${p.availableTokens}</p>
        </a>
      `;
    });
  })
  .catch(() => {
    document.getElementById("grid").textContent = "Error loading properties.";
  });
</script>

  </body>
</html>
